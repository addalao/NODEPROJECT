{"version":3,"file":"home.0d22ab27.js","sources":["../../src/components/Menu/leftMenu.vue","../../src/home.vue"],"sourcesContent":["<template>\n    <n-layout-sider\n        bordered\n        collapse-mode=\"width\"\n        :collapsed-width=\"64\"\n        :width=\"240\"\n        :collapsed=\"state.collapsed\"\n        show-trigger\n        @collapse=\"state.collapsed = true\"\n        @expand=\"state.collapsed = false\"\n    >\n        <!-- icon图标 ---需要的时候解开  <div class=\"icon\">1111</div> -->\n        <n-menu \n            default-value=\"1\"\n            :options=\"list\" \n            @update:value=\"handleUpdateValue\" \n            :render-label=\"renderMenuLabel\"\n            :render-icon=\"(item)=>renderMenuIcon(item)\"\n        />\n    </n-layout-sider>\n</template>\n<script setup>\nimport { h,reactive,computed } from 'vue'\nimport { useRoute,useRouter } from 'vue-router';\nimport * as Icons from '@ant-design/icons-vue';\nimport { useStore } from 'vuex';\nconst store = useStore()\n// const route = useRoute();\nconst router = useRouter();\n\n\nconst list = computed(()=>{//不包括按钮的菜单list\n    const btnList = []\n    const menuList = JSON.parse(JSON.stringify(store.state.page.menuList))\n    const getList = (list)=>{\n        list.forEach((item)=>{\n            if(item.type == 1 && item.children?.length){\n                if(item.children[0].type == 2){\n                    btnList.push([...item.children])\n                    delete item.children\n                }else if(item.children[0].type == 1){\n                    getList(item.children)\n                }\n            }\n        })\n    }\n    \n    getList(menuList)\n    dispose(menuList)\n    store.commit('page/setBtnList',btnList)\n    return menuList\n\n\n} );  \n\n\nconst state = reactive({\n    collapsed: false,\n})\n\nconst renderMenuLabel = (optin) => {\n    return optin.name\n}\nconst handleUpdateValue = (key, item) => {\n \n    router.push(item.uri)\n}\nconst renderMenuIcon = (item)=>{\n   return  h(Icons[item.myIcon])\n}\n\nfunction dispose(list){//处理菜单里的icon不兼容问题\n    list.forEach((item)=>{\n        item.myIcon = 'HomeOutlined' //由于跟旧版icon不兼容，暂时使用统一图标，正式使用时菜单需要设置为antd的图标名称，即可换为item.icon\n        delete item.icon\n        if(item.children?.length){\n            dispose(item.children)\n        }\n    })\n}\n</script>\n\n<style scoped>\n.icon{\n    height: 150px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n.leftMenu {\n    width: 200px;\n}\n</style>","<template>\n    <n-layout class=\"home\" has-sider >\n        <myleftMenu class=\"menu\"/>\n        <div class=\"subject\">\n            <header class=\"header\">头部</header>\n            <div class=\"content\">\n                <n-layout has-sider class=\"layoutBox\"  >\n                    <n-layout-sider class=\"siderBox\"  content-style=\" padding: 24px;\">\n                        <router-view v-slot=\"{Component,route}\">\n                            <Transition name=\"slide-left\">\n                                <div class=\"homeBox\" :key=\"route.path\" >\n                                    <component :is=\"Component\"/>\n                                </div>\n                            </Transition>\n                        </router-view>\n                        <!-- <router-view></router-view> -->\n                    </n-layout-sider>\n                </n-layout>\n            </div>\n            <footer class=\"footer\">\n                底部\n            </footer>\n        </div>\n    </n-layout>\n</template>\n<script setup>\n    import myleftMenu from './components/Menu/leftMenu.vue'\n    import { useMessage } from \"naive-ui\";\n    import _axios from '@p/axios'\n    import { useStore } from 'vuex';\n    const store = useStore()\n    const message = useMessage()\n    window.$message = message;\n\n    \n    getMenuList()\n    async function getMenuList(){\n        const res = await _axios(\"get\",\"/sys/sysPermission/Treelist\",{},true)\n        store.commit('page/setMenuList',res)\n    }\n   \n</script>\n<style scoped>\n.homeBox{\n    width: 100%;\n    height: 100%;\n}\n.siderBox{\n    max-width: 100% !important;\n    width: 100% !important;\n    height: 100% !important;\n    \n}\n.layoutBox{\n    width: 100%;\n    height: 100%;\n    /* background: blue; */\n}\n.menu{\n    max-width: 300px;\n    z-index: 99;\n}\n.home{\n    width: 100%;\n    height: 99vh; \n    display: flex;\n    box-sizing: border-box;\n    background: rgba(102, 101, 101, 0.1);\n}\n.subject{\n    flex: 1;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    box-sizing: border-box;\n    /* width: 100%; */\n    /* margin-left: 10px; */\n}\n.header{\n    height: 80px;\n    margin-bottom: 10px;\n    background: #fff;\n}\n.content{\n    flex: 1;\n    overflow-y: scroll;\n    /* border: 1px solid red; */\n    background: #fff;\n}\n.footer{\n    margin-top: 10px;\n    height: 30px;\n    background: #fff;\n}\n.slide-left-enter-active,\n.slide-left-leave-active,\n.slide-right-enter-active,\n.slide-right-leave-active {\n    width: 100%;\n    height: 100%;\n    will-change: transform;\n    transition: all 300ms cubic-bezier(.55,0,.1,1);\n    position: absolute;\n    backface-visibility: hidden;\n}\n.slide-right-enter-active {\n    opacity: 0;\n    transform: translate3d(-100%, 0, 0);\n}\n.slide-right-leave-active {\n    opacity: 0;\n    transform: translate3d(3%, 0, 0);\n}\n.slide-left-enter-active{\n    opacity: 0;\n    transform: translate3d(100%, 0, 0);\n}\n.slide-left-leave-active{\n    opacity: 0;\n    transform: translate3d(-3%, 0, 0);\n}\n</style>"],"names":["store","useStore","router","useRouter","list","computed","btnList","menuList","getList","item","_a","dispose","state","reactive","renderMenuLabel","optin","handleUpdateValue","key","renderMenuIcon","h","Icons","message","useMessage","getMenuList","res","_axios"],"mappings":"yPA0BA,MAAMA,EAAQC,EAAU,EAElBC,EAASC,EAAS,EAGlBC,EAAOC,EAAS,IAAI,CACtB,MAAMC,EAAU,CAAE,EACZC,EAAW,KAAK,MAAM,KAAK,UAAUP,EAAM,MAAM,KAAK,QAAQ,CAAC,EAC/DQ,EAAWJ,GAAO,CACpBA,EAAK,QAASK,GAAO,OACdA,EAAK,MAAQ,KAAKC,EAAAD,EAAK,WAAL,YAAAC,EAAe,UAC7BD,EAAK,SAAS,GAAG,MAAQ,GACxBH,EAAQ,KAAK,CAAC,GAAGG,EAAK,QAAQ,CAAC,EAC/B,OAAOA,EAAK,UACPA,EAAK,SAAS,GAAG,MAAQ,GAC9BD,EAAQC,EAAK,QAAQ,EAGzC,CAAS,CACJ,EAED,OAAAD,EAAQD,CAAQ,EAChBI,EAAQJ,CAAQ,EAChBP,EAAM,OAAO,kBAAkBM,CAAO,EAC/BC,CAGX,GAGMK,EAAQC,EAAS,CACnB,UAAW,EACf,CAAC,EAEKC,EAAmBC,GACdA,EAAM,KAEXC,EAAoB,CAACC,EAAKR,IAAS,CAErCP,EAAO,KAAKO,EAAK,GAAG,CACxB,EACMS,EAAkBT,GACbU,EAAEC,EAAMX,EAAK,OAAO,EAG/B,SAASE,EAAQP,EAAK,CAClBA,EAAK,QAASK,GAAO,OACjBA,EAAK,OAAS,eACd,OAAOA,EAAK,MACTC,EAAAD,EAAK,WAAL,MAAAC,EAAe,QACdC,EAAQF,EAAK,QAAQ,CAEjC,CAAK,CACL,gsBCjDI,MAAMT,EAAQC,EAAU,EAClBoB,EAAUC,EAAY,EAC5B,OAAO,SAAWD,EAGlBE,EAAa,EACb,eAAeA,GAAa,CACxB,MAAMC,EAAM,MAAMC,EAAO,MAAM,8BAA8B,CAAE,EAAC,EAAI,EACpEzB,EAAM,OAAO,mBAAmBwB,CAAG,CACtC"}