{"version":3,"file":"menu.f5e7395b.js","sources":["../../src/components/collapse/btnChild.vue","../../src/components/collapse/collapse.vue","../../src/views/menu.vue"],"sourcesContent":["<template>\n    <div class=\"affiliation\">\n        {{ props.name }}的按钮:\n    </div>\n    <div class=\"btnBox\" >\n        <n-popconfirm v-for=\"(citem, cindex) in state.list\" :key=\"citem.id\">\n            <template #icon>\n                {{ '' }}\n            </template>\n            <template #trigger>\n                <n-button type=\"tertiary\" class=\"btn\"  @click=\"btnClick(citem)\">\n                    {{ citem.name }}\n                </n-button>\n            </template>\n\n            <template #action>\n                <n-button size=\"small\">\n                    新增\n                </n-button>\n                <n-button size=\"small\">\n                    编辑\n                </n-button>\n                <n-button type=\"error\" size=\"small\">\n                    删除\n                </n-button>\n            </template>\n        </n-popconfirm>\n    </div>\n    <template v-if=\"state.childList?.length\"> \n        <btnChild :name=\"state.name\" :list=\"state.childList\"></btnChild>\n    </template>\n</template>\n\n<script setup>\nimport { reactive, watch } from 'vue'\nimport btnChild from './btnChild.vue';\n\nconst props = defineProps({\n    list: {\n        type: Array,\n        default: () => []\n    },\n    name: {\n        type: String,\n        default: ''\n    }\n})\n\nconst state = reactive({\n    list: props.list,\n    childList:[],\n    name:''\n})\n\nconst btnClick = (item)=>{\n    state.childList = item.children\n    state.name = item.name\n}\n\nwatch(() => props.list, (vla) => {\n    state.list = vla\n})\n</script>\n\n<style scoped lang=\"scss\">\n.affiliation {\n    font-size: 12px;\n    color: rgba(0, 0, 0, 0.6);\n    margin-bottom: 5px;\n}\n\n.btnBox {\n    display: flex;\n    width: 100%;\n    align-items: center;\n    flex-wrap: wrap;\n    box-sizing: border-box;\n    padding: 0 20px;\n\n    .btn {\n        margin-right: 10px;\n    }\n}\n</style>","<template>\n    <!-- 菜单右侧的弹窗 -->\n    <n-collapse>\n        <n-collapse-item v-for=\"(item, index) in state.list\" :title=\"item.name\" :name=\"item.id\" :key=\"item.id\">\n            <template #header-extra>\n                <div class=\"headerBtnBox\">\n                    <n-button @click.stop=\"\" class=\"headerBtn\" size=\"tiny\" strong secondary round type=\"info\">\n                        编辑\n                    </n-button>\n                    <n-button @click.stop=\"\"  class=\"headerBtn\" size=\"tiny\" strong secondary round type=\"primary\">\n                        新增\n                    </n-button>\n                    <div @click.stop=\"\">\n                        <n-popconfirm @positive-click=\"() => {\n                            confirmDelete(item)\n                        }\" positive-text=\"确认\" negative-text=\"取消\">\n                            <template #trigger>\n                                <n-button class=\"headerBtn\" size=\"tiny\" strong secondary round type=\"error\">\n                                    删除\n                                </n-button>\n                            </template>\n                            确认删除\n                        </n-popconfirm>\n                    </div>\n\n\n                </div>\n            </template>\n            <template v-if=\"item.children && item.children[0].type == '1'\">\n                <collapse :list=\"item.children\" @refresh=\"refresh\">\n\n                </collapse>\n            </template>\n            <template v-else-if=\"item.children && item.children[0].type == '2'\">\n                <btnChild :name=\"item.name\"  :list=\"item.children\">\n                </btnChild>\n            </template>\n        </n-collapse-item>\n    </n-collapse>\n</template>\n<script setup>\nimport { watch, reactive } from 'vue'\nimport collapse from './collapse.vue'\nimport btnChild from './btnChild.vue';\n// import _axios from '../../'\nconst emits = defineEmits(['refresh'])\nconst refresh = () => {\n    emits('refresh')\n}\nconst props = defineProps({\n    list: {\n        type: Array,\n        default: () => []\n    }\n})\nconst state = reactive({\n    list: props.list,\n    affirmShow: false\n})\nwatch(() => props.list, (vla) => {\n    state.list = vla\n})\nconst confirmDelete = (item) => {\n\n    state.affirmShow = false\n    refresh();\n}\n\n</script>\n<style lang=\"scss\" scoped>\n.headerBtnBox {\n    width: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n\n    .headerBtn {\n        margin-right: 5px;\n    }\n}\n\n.btnBox {\n    display: flex;\n    width: 100%;\n    align-items: center;\n    flex-wrap: wrap;\n    box-sizing: border-box;\n    padding: 0 20px;\n\n    .btn {\n        margin-right: 10px;\n    }\n}\n</style>","<template>\n    <div class=\"box\">\n        <div class=\"card\" v-for=\"(item, index) in list\" :key=index>\n            <n-card :title=\"item.name\">\n                <template #header-extra>\n                    <component :is=\"item.myIcon\"></component>\n                </template>\n                <div class=\"btnBox\">\n                    <n-button strong secondary circle type=\"primary\">\n                        <template #icon>\n                            <n-icon>\n                                <EditOutlined />\n                            </n-icon>\n                        </template>\n                    </n-button>\n                    <n-button strong secondary circle type=\"error\">\n                        <template #icon>\n                            <n-icon>\n                                <DeleteOutlined />\n                            </n-icon>\n                        </template>\n                    </n-button>\n                    <n-button strong secondary type=\"info\" @click=\"child(item)\">\n                        子菜单\n                    </n-button>\n                </div>\n            </n-card>\n        </div>\n    </div>\n    <n-drawer v-model:show=\"state.drawerShow\" :width=\"502\" placement=\"right\">\n        <n-drawer-content :native-scrollbar=\"false\">\n            <template #header>\n                <div class=\"drawerTitle\">\n                    <div class=\"drawerName\">\n                        <h2>\n                            {{ state.drawerItem?.name }}\n                        </h2>\n                    </div>\n                    <div class=\"titleBtn\">\n                        <n-button strong secondary round type=\"primary\">\n                            新增\n                        </n-button>\n                    </div>\n                </div>\n            </template>\n            <collapse :list=\"state.drawerItem.children\" @refresh=\"refresh\">\n            </collapse>\n        </n-drawer-content>\n    </n-drawer>\n</template>\n<script setup>\nimport { reactive } from 'vue'\nimport collapse from '../components/collapse/collapse.vue'\nconst state = reactive({\n    drawerItem: {},\n    drawerShow: false\n})\n//服务器数据\nconst list = [\n    \n    {\n        createTime: \"2022-10-09T09:11:39\",\n        myIcon: \"StepBackwardOutlined\",\n        id: \"2\",\n        name: \"楼宇分析2\",\n        pageNum: 1,\n        pageSize: 15,\n        permission: 1,\n        pid: \"0\",\n        sort: 0,\n        status: 1,\n        type: 1,\n        updateTime: \"2022-10-09T09:11:39\",\n        uri: \"/analysis\",\n        children: [\n            {\n                createTime: \"2022-10-09T09:11:39\",\n                myIcon: \"StepBackwardOutlined\",\n                id: \"3\",\n                name: \"楼宇分析3\",\n                pageNum: 1,\n                pageSize: 15,\n                permission: 1,\n                pid: \"0\",\n                sort: 0,\n                status: 1,\n                type: 1,\n                updateTime: \"2022-10-09T09:11:39\",\n                uri: \"/analysis\",\n                children: [\n                    {\n                        createTime: \"2022-10-09T09:11:39\",\n                        myIcon: \"StepBackwardOutlined\",\n                        id: \"5\",\n                        name: \"列表\",\n                        pageNum: 1,\n                        pageSize: 15,\n                        permission: 1,\n                        pid: \"0\",\n                        sort: 0,\n                        status: 1,\n                        type: 1,\n                        updateTime: \"2022-10-09T09:11:39\",\n                        uri: \"/analysis\",\n                        children:[\n                            {\n                                createTime: \"2022-10-09T09:11:39\",\n                                myIcon: \"StepBackwardOutlined\",\n                                id: \"6\",\n                                name: \"按钮1\",\n                                pageNum: 1,\n                                pageSize: 15,\n                                permission: 1,\n                                pid: \"0\",\n                                sort: 0,\n                                status: 1,\n                                type: 2,\n                                updateTime: \"2022-10-09T09:11:39\",\n                                uri: \"/myList\",\n                                children:[//次级按钮\n                                    {\n                                        createTime: \"2022-10-09T09:11:39\",\n                                        myIcon: \"StepBackwardOutlined\",\n                                        id: \"8\",\n                                        name: \"次级按钮1\",\n                                        pageNum: 1,\n                                        pageSize: 15,\n                                        permission: 1,\n                                        pid: \"0\",\n                                        sort: 0,\n                                        status: 1,\n                                        type: 2,\n                                        updateTime: \"2022-10-09T09:11:39\",\n                                        uri: \"/myList\",\n                                    },\n                                ]\n                            },\n                            {\n                                createTime: \"2022-10-09T09:11:39\",\n                                myIcon: \"StepBackwardOutlined\",\n                                id: \"7\",\n                                name: \"按钮2\",\n                                pageNum: 1,\n                                pageSize: 15,\n                                permission: 1,\n                                pid: \"0\",\n                                sort: 0,\n                                status: 1,\n                                type: 2,\n                                updateTime: \"2022-10-09T09:11:39\",\n                                uri: \"/myList\",\n                            },\n                        ]\n                    },\n                    \n                ]\n\n            },\n            {\n                createTime: \"2022-10-09T09:11:39\",\n                myIcon: \"StepBackwardOutlined\",\n                id: \"33\",\n                name: \"楼宇分析4\",\n                pageNum: 1,\n                pageSize: 15,\n                permission: 1,\n                pid: \"0\",\n                sort: 0,\n                status: 1,\n                type: 1,\n                updateTime: \"2022-10-09T09:11:39\",\n                uri: \"/analysis\",\n                children: [\n                    {\n                        createTime: \"2022-10-09T09:11:39\",\n                        myIcon: \"StepBackwardOutlined\",\n                        id: \"55\",\n                        name: \"列表\",\n                        pageNum: 1,\n                        pageSize: 15,\n                        permission: 1,\n                        pid: \"0\",\n                        sort: 0,\n                        status: 1,\n                        type: 1,\n                        updateTime: \"2022-10-09T09:11:39\",\n                        uri: \"/analysis\",\n                        children:[\n                            {\n                                createTime: \"2022-10-09T09:11:39\",\n                                myIcon: \"StepBackwardOutlined\",\n                                id: \"66\",\n                                name: \"按钮1\",\n                                pageNum: 1,\n                                pageSize: 15,\n                                permission: 1,\n                                pid: \"0\",\n                                sort: 0,\n                                status: 1,\n                                type: 2,\n                                updateTime: \"2022-10-09T09:11:39\",\n                                uri: \"/myList\",\n                                children:[//次级按钮\n                                    {\n                                        createTime: \"2022-10-09T09:11:39\",\n                                        myIcon: \"StepBackwardOutlined\",\n                                        id: \"88\",\n                                        name: \"次级按钮1\",\n                                        pageNum: 1,\n                                        pageSize: 15,\n                                        permission: 1,\n                                        pid: \"0\",\n                                        sort: 0,\n                                        status: 1,\n                                        type: 2,\n                                        updateTime: \"2022-10-09T09:11:39\",\n                                        uri: \"/myList\",\n                                        children:[\n                                            {\n                                                createTime: \"2022-10-09T09:11:39\",\n                                                myIcon: \"StepBackwardOutlined\",\n                                                id: \"888\",\n                                                name: \"次级按钮11\",\n                                                pageNum: 1,\n                                                pageSize: 15,\n                                                permission: 1,\n                                                pid: \"0\",\n                                                sort: 0,\n                                                status: 1,\n                                                type: 2,\n                                                updateTime: \"2022-10-09T09:11:39\",\n                                                uri: \"/myList\",\n                                            },\n                                        ]\n                                    },\n                                ]\n                            },\n                            {\n                                createTime: \"2022-10-09T09:11:39\",\n                                myIcon: \"StepBackwardOutlined\",\n                                id: \"77\",\n                                name: \"按钮2\",\n                                pageNum: 1,\n                                pageSize: 15,\n                                permission: 1,\n                                pid: \"0\",\n                                sort: 0,\n                                status: 1,\n                                type: 2,\n                                updateTime: \"2022-10-09T09:11:39\",\n                                uri: \"/myList\",\n                            },\n                        ]\n                    },\n                    \n                ]\n\n            },\n        ]\n    },\n]\nconst geList = (name,myList=list)=>{\n    let lookItem;\n    for(let i in myList){\n        if(lookItem) break\n        const item = myList[i]\n        if(item.uri == name){\n            lookItem = item\n        }else if(item.children){\n            lookItem = geList(name,item.children)\n        }\n    }\n    return lookItem\n}\n\n\nconst child = (item) => {\n\n    state.drawerItem = item //正在更改的菜单\n    state.drawerShow = true //打开抽屉\n}\nconst refresh = ()=>{\n    //此处应该重新获取list然后更改state.drawerItem\n    state.drawerItem = list.find((item)=> item.id == state.drawerItem.id)\n     \n}\n\n</script>\n<style lang=\"scss\" scoped>\n.listBox {\n    display: flex;\n    flex-direction: column;\n}\n\n.drawerTitle {\n    width: 400px;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    // .drawerName{\n\n    // }\n    .titleBtn {}\n}\n\n.box {\n    width: 100%;\n    display: flex;\n    flex-wrap: wrap;\n    flex-direction: row;\n    /* background: red; */\n    height: 100%;\n\n    .demo {\n        display: flex;\n    }\n}\n\n.card {\n    /* bak */\n    width: 225px;\n    margin-right: 10px;\n}\n\n.btnBox {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n}\n</style>"],"names":["state","reactive","props","btnClick","item","watch","vla","refresh","emits","confirmDelete","list","child"],"mappings":"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"}